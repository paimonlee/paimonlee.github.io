---
title: 压测专业术语
categories:
    - TPS
    - QPS
    - 系统吞吐量
---
# 一、QPS/TPS

QPS（Queries Per Second）：每秒查询率，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。

TPS（Transactions Per Second）：每秒事务数。它是**软件测试**结果的测量单位。一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数。

Tps即每秒处理事务数，包括:

> 1. 用户请求服务器
> 2. 服务器自己的内部处理
> 3. 服务器返回给用户

每秒能够完成N个这三个过程，TPS也就是N；

QPS基本类似于TPS，但是不同的是，对于一个页面的一次访问，形成一个TPS；但一次页面请求，可能产生多次对服务器的请求，服务器对这些请求，就可计入“QPS”之中。

例如：访问一个页面会请求服务器3次，一次放，产生一个“TPS”，产生3个“QPS”

# 二、系统吞吐量

一个系统的吞度量（承压能力）与request对CPU的消耗、外部接口、IO等等紧密关联。单个reqeust 对CPU消耗越高，外部系统接口、IO影响速度越慢，系统吞吐能力越低，反之越高。

系统吞吐量几个重要参数：QPS/TPS、并发数、响应时间

(QPS/TPS)：每秒钟 (request/事务) 数量

并发数：系统同时处理的 (request/事务) 数

响应时间：一般取平均响应时间

理解了上面三个要素的意义之后，就能推算出它们之间的关系：

(QPS/TPS) = 并发数/平均响应时间

并发数 = (QPS/TPS) * 平均响应时间

例如：一个典型的上班签到系统，早上8点上班，7点半到8点的30分钟的时间里用户会登录签到系统进行签到。公司员工为1000人，平均每个员上登录签到系统的时长为5分钟。可以用下面的方法计算。

TPS = 1000/(30*60) 事务/秒

平均响应时间为 = 5*60  秒

并发数 = TPS * 平均响应时间 = 1000/(30 * 60) * (5 * 60) = 166.7

一个系统吞吐量通常由QPS/TPS、并发数两个因素决定，每套系统这两个值都有一个相对极限值，在应用场景访问压力下，只要某一项达 到系统最高值，系统的吞吐量就上不去了，如果压力继续增大，系统的吞吐量反而会下降，原因是系统超负荷工作，上下文切换、内存等等其它消耗导致系统性能下 降。

# 三、吞吐量的计算公式

从业务角度看，吞吐量(RPS:Requests Per Second)可以用：请求数/秒、页面数/秒、人数/天或处理业务数/小时等单位来衡量

从网络角度看，吞吐量可以用：字节/秒来衡量

对于交互式应用来说，吞吐量指标反映的是服务器承受的压力，他能够说明系统的负载能力

以不同方式表达的吞吐量可以说明不同层次的问题，例如，以字节数/秒方式可以表示数要受网络基础设施、服务器架构、应用服务器制约等方面的瓶颈；已请求数/秒的方式表示主要是受应用服务器和应用代码的制约体现出的瓶颈。

当没有遇到性能瓶颈的时候，吞吐量与虚拟用户数之间存在一定的联系，可以采用以下公式计算：F= VU * R / T

其中F为吞吐量，VU表示虚拟用户个数，R表示每个虚拟用户发出的请求数，T表示性能测试所用的时间

# 四、性能术语

1、并发用户数的计算公式

系统用户数：系统额定的用户数量，如一个OA系统，可能使用该系统的用户总数是5000个，那么这个数量，就是系统用户数。

同时在线用户数：在一定的时间范围内，最大的同时在线用户数量。

同时在线用户数 = 每秒请求数RPS + 并发连接数 + 平均用户思考时间

平均并发用户数的计算：C = n * L / T

其中C是平均的并发用户数，n是平均每天访问用户数（login session），L是一天内用户从登录到退出的平均时间（login session的平均时间），T是考察时间长度（一天内多长时间有用户使用系统）

并发用户数峰值计算：C^约等于C + 3*根号C

其中C^是并发用户峰值，C是平均并发用户数，该公式遵循泊松分布理论。
